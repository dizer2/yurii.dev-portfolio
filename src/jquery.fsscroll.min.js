!function(t){"use strict";var i=function(t){var i,e=["webkit","Moz","o","ms"];for(var s in e)if(i=e[s]+"Transition",void 0!==t.style[i])return"-"+e[s].toLowerCase()+"-";return!1}(document.createElement("div")),e={selectors:{sections:".sections",section:".section",page:".page",active:".active"},index:0,timing:"ease",duration:500,loop:!1,pagination:!0,keyboard:!1,direction:"vertical",beforeScroll:null,afterScroll:null};function s(i,s){this.element=i,this.options=t.extend({},e,s||{}),this.init()}s.prototype={init:function(){this.selectors=this.options.selectors,this.sections=this.element.find(this.selectors.sections),this.section=this.element.find(this.selectors.section),this.isVertical="vertical"===this.options.direction,this.pagesCount=this.pagesCount(),this.index=this.options.index>=0&&this.options.index<this.pagesCount?this.options.index:0,this.canScroll=!0,this._addPosition(),this.isVertical&&!this.index||this._initLayout(),this.options.pagination&&this._initPagination(),this._initEvent()},pagesCount:function(){return this.section.length},prev:function(){this.index?this.index--:this.index=this.pagesCount-1,this._scrollPage()},next:function(){this.index===this.pagesCount-1?this.index=0:this.index++,this._scrollPage()},_getScrollLength:function(){return this.isVertical?this.element.height():this.element.width()},_addPosition:function(){var t=this.sections.css("position");t&&"relative"===t||this.sections.css("position","relative")},_initLayout:function(){if(!this.isVertical){var t=100*this.pagesCount+"%",i=(100/this.pagesCount).toFixed(2)+"%";this.sections.width(t),this.section.width(i).css("float","left")}this.index&&this._scrollPage(!0)},_initPagination:function(){for(var t="<ul class="+this.selectors.page.substring(1)+">",i=0;i<this.pagesCount;i++)t+="<li></li>";t+="</ul>",this.element.append(t);var e=this.element.find(this.selectors.page);this.pageItem=e.find("li"),this.activeCls=this.selectors.active.substring(1),this.pageItem.eq(this.index).addClass(this.activeCls),this.isVertical?e.addClass("vertical"):e.addClass("horizontal")},_initEvent:function(){var e=this;e.element.on("mousewheel DOMMouseScroll",function(t){t.preventDefault();var i=t.originalEvent.wheelDelta||-t.originalEvent.detail;e.canScroll&&(i>0&&(e.options.loop||e.index)?e.prev():i<0&&(e.options.loop||e.index<e.pagesCount-1)&&e.next())}),e.options.keyboard&&t(document).on("keyup",function(t){var i=t.keyCode;37===i||38===i?e.prev():39!==i&&40!==i||e.next()});var s=null;t(window).on("resize",function(){clearTimeout(s),s=setTimeout(function(){if(e.index){var t=e.section.eq(e.index).offset(),i=e._getScrollLength(),s=e.isVertical?t.top:t.left;Math.abs(s)>i/2&&(s>0?e.index--:e.index++),e._scrollPage()}},200)}),e.element.on("click",this.selectors.page+" li",function(i){e.index=t(this).index(),e._scrollPage()}),i&&e.sections.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend",function(){e.canScroll=!0,e._afterScroll()})},_scrollPage:function(t){var e=this,s=e.section.eq(e.index).position();if(s){if(e.canScroll=!1,this._beforeScroll(),i){var n=e.isVertical?"translateY(-"+s.top+"px)":"translateX(-"+s.left+"px)";e.sections.css(i+"transition","all "+e.options.duration+"ms "+e.options.timing),e.sections.css(i+"transform",n)}else{var o=e.isVertical?{top:-s.top}:{left:-s.left};e.sections.animate(o,e.options.duration,function(){e.canScroll=!0,e._afterScroll()})}e.options.pagination&&!t&&e.pageItem.eq(e.index).addClass(e.activeCls).siblings("li").removeClass(e.activeCls)}},_beforeScroll:function(){this.options.beforeScroll&&"function"===t.type(this.options.beforeScroll)&&this.options.beforeScroll.call(this,this.section.eq(this.index),this.index)},_afterScroll:function(){this.options.afterScroll&&"function"===t.type(this.options.afterScroll)&&this.options.afterScroll.call(this,this.section.eq(this.index),this.index)}},t.fn.fsScroll=function(i){return this.each(function(){var e=t(this),n=e.data("fsScroll");if(n||(n=new s(e,i),e.data("fsScroll",n)),"string"==typeof i&&n[i])return n[i]()})},t(function(){t("[data-fs-scroll]").fsScroll()})}(jQuery);
